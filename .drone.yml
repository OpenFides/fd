---
kind: pipeline
type: exec
name: default

platform:
  os: linux
  arch: amd64 

steps:
- name: greeting
  commands:
  - echo ${DRONE_BUILD_NUMBER}
  - echo $HOME  
- name: maven
  commands:
  - export HOME=/root
  - mvn versions:set -DnewVersion=1.0.${DRONE_BUILD_NUMBER}
  - mvn deploy -Dmaven.test.skip=true
  - mvn versions:revert

# trigger:
#   event:
#   - promote
#   target:
#   - production 